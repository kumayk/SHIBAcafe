<div class="container">
   <div class="row">
      <div class="col-md-4 col-md-offset-4">
         <div class="form-user style-1 rounded has-shadow-1"> 
            <div class="form-header text-center">
               <h3 class="profile-name"><%= @user.name %></h3>
                  <% if current_user != @user %>
                     <% if @user.followed_by?(current_user) %>
                       <p><%=link_to "フォロー解除", user_relationships_path(@user.id), method: :delete %></p>
                     <% else %>
                       <p><%=link_to "フォローする", user_relationships_path(@user.id), method: :post %></p>
                     <% end %>
                  <% end %>
                 <p><%= attachment_image_tag @user, :profile_image, class: "img-circle pull-left profile-img", fallback: "no-image.jpg", size: "150x150" %></p>
                 <p><%= simple_format(@user.introduction) %></p>
                   <% if @user.id == current_user.id %>
                     <p><%= link_to "プロフィール編集", edit_user_path(@user), class: "pull-right" %></p>
                   <% end %>
            </div>
         </div>
      </div>
   </div>
</div>
<div class="container">
  <div class="row">
    <ul class="tab">
      <li class="active">画像</li>
      <li>動画</li>
      <% if @user == current_user %>
      <li>質問</li>
      <% end %>
    </ul>

      <div class="tabContent active">
            <p class="title">投稿画像一覧</p>
                 <div class="post_images" style="text-align: center; margin-left: 20px;">
                  <% @user.post_images.each do |image| %>
                   <ul class="list-group col-lg-3" style="width: 230px;">
                      <li class="list-group-item"><%= attachment_image_tag image, :image, class: "profile-thumb", size: "180x180" %></li>
                      <li class="list-group-item"><%= image.title %></li>
                      <li class="list-group-item"><%= image.caption %></li>
                      <li class="list-group-item"><%= link_to "詳細", post_image_path(image.id) %></li>
                    </ul>
                  <% end %>
                 </div>
      </div>
      <div class="tabContent">
            <p class="title">投稿動画一覧</p>
               <div class="post_movies" style="text-align: center; margin-left: 20px;">
                  <% @user.post_movies.each do |movie| %>
                   <ul class="list-group col-lg-3" style="width: 380px;">
                     <li class="list-group-item">
                        <%= link_to movie.video_url.to_s do %>
                            <%= image_tag(movie.video_url(:screenshot).to_s, id: "video", :alt => "screenshot", style: "height:13em;") %>
                        <% end %>
                      </li>
                      <li class="list-group-item"><%= movie.title %></li>
                      <li class="list-group-item"><%= movie.caption %></li>
                      <li class="list-group-item"><%= link_to "詳細", post_movie_path(movie.id) %></li>
                    </ul>
                  <% end %>
               </div>
      </div>
      <div class="tabContent">
            <p class="title">質問一覧</p>
               <div class="post_questions" style="text-align: center; margin-left: 20px;">
                 <% @user.post_questions.each do |question| %>
                   <ul class="list-group col-lg-3" style="width: 380px;">
                      <li class="list-group-item"><%= question.title %></li>
                      <li class="list-group-item"><%= question.body %></li>
                      <li class="list-group-item"><%= question.answers.count %>件の回答</li>
                      <li class="list-group-item"><%= link_to "詳細", post_question_path(question.id) %></li>
                   </ul>
                 <% end %>
               </div>
      </div>
   </div>
</div>

<script>
$(function() {
    $(".tab li").click(function() { //タブをクリックしたときのファンクションをまとめて指定
        var num = $(".tab li").index(this); //.index()を使いクリックされたタブが何番目かを調べ、numという変数に代入

        $(".tabContent").removeClass('active'); //コンテンツを一度すべて非表示

        $(".tabContent").eq(num).addClass('active'); //クリックされたタブと同じ順番のコンテンツを.activeをクラスに追加して表示

        $(".tab li").removeClass('active'); //一度タブについているクラス.activeを消して

        $(this).addClass('active') //クリックされたタブのみにクラス.activeをつける
    });
});
</script>